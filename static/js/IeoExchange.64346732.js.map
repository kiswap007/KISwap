{"version":3,"sources":["webpack:///./src/views/ieo/exchange.vue","webpack:///./src/views/ieo/exchange.vue?da80","webpack:///./node_modules/dateformat/lib/dateformat.js","webpack:///./src/views/ieo/exchange.vue?128a"],"names":["class","h1","h4","$t","project","symbol","type","amount","placeholder","kisAmount","address","Number","tokenAllowance","isStop","swap","isEnd","stop","approveToken","initWallet","components","IndexTop","setup","store","route","t","data","themeMode","state","rate","web3","provider","accounts","ieoContract","tokenContract","kis","config","kisAddress","priceUsdt","toFixed","id","params","initContract","eth","Contract","ieoAbi","ieo","getList","getTokenAllowance","initWeb3","methods","allowance","call","then","approve","send","from","result","getProjectById","projectItem","tokenAddress","decimals","tokenSpend","dividedBy","Math","pow","startTime","Date","stopTime","tokenTotal","haveCollect","error","multipliedBy","swapToken","stopRefund","val","refData","render","__scopeId","_typeof","obj","Symbol","iterator","constructor","prototype","global","_arguments","arguments","dateFormat","token","timezone","timezoneClip","date","mask","utc","gmt","length","kindOf","test","undefined","isNaN","TypeError","String","masks","maskSlice","slice","_","_d","D","_m","y","_H","_M","_s","_L","_o","getTimezoneOffset","_W","getWeek","_N","getDayOfWeek","flags","d","dd","pad","ddd","i18n","dayNames","DDD","getDayName","m","dayName","short","dddd","DDDD","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","H","HH","M","MM","s","ss","l","L","floor","timeNames","tt","T","TT","Z","match","pop","replace","o","abs","p","S","W","WW","N","default","shortDate","paddedShortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","expiresHeaderFormat","len","_ref","_ref$short","_short","today","yesterday","setDate","tomorrow","today_d","today_m","today_y","yesterday_d","yesterday_m","yesterday_y","tomorrow_d","tomorrow_m","tomorrow_y","targetThursday","getFullYear","getMonth","getDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","Array","isArray","toString","toLowerCase"],"mappings":"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","file":"static/js/IeoExchange.64346732.js","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <index-top \r\n      :h1=\"'KISwap'\"\r\n      :h4=\"$t('index.最具潜力的集DEX、IKO、DAO、聚合交易为一体的DEFI生态平台')\"></index-top>\r\n    <div class=\"top-text\">\r\n      {{$t('ieo.注意：我们只支持okexchainkis，不要转移etherummainnet令牌')}}\r\n    </div>\r\n    <div class=\"form-block\">\r\n      <div class=\"cell-row flex-middle\">\r\n        <div class=\"label\">{{project ? project.symbol : ''}}{{$t('index.数量')}}</div>\r\n        <div class=\"flex-item cont\">\r\n          <input type=\"number\" v-model=\"amount\" :placeholder=\"$t('ieo.请输入')\" class=\"input-style\">\r\n        </div>\r\n      </div>\r\n      <div class=\"cell-msg\">{{$t('ieo.kis数量', {num: kisAmount})}}</div>\r\n      <div class=\"form-btn\" v-if=\"!address\" @click=\"initWallet\">{{$t('ieo.连接钱包')}}</div>\r\n      <div class=\"form-btn\" v-else-if=\"!Number(tokenAllowance)\" @click=\"approveToken\">{{$t('ieo.授权KIS代币')}}</div>\r\n      <div class=\"form-btn\" v-else-if=\"project && !project.isStop\" @click=\"swap\">{{$t('index.兑换')}}</div>\r\n      <div class=\"form-btn\" v-else-if=\"project && !project.isEnd\" @click=\"stop\">{{$t('ieo.项目方获取资金')}}</div>\r\n      <div class=\"form-btn\" v-else @click=\"stop\">{{$t('ieo.已结束')}}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport IndexTop from \"@/views/index/IndexTop\";\r\nimport { reactive, toRefs, computed, watch} from \"vue\";\r\nimport ieoAbi from \"@/utils/ieoAbi\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport Dateformat from \"dateformat\";\r\nimport {useStore} from \"vuex\";\r\nimport { MaxUint256 } from \"@ethersproject/constants\";\r\nimport { useRoute } from \"vue-router\";\r\nimport web3Data from \"@/utils/initWeb3\";\r\nimport { ElMessage } from 'element-plus';\r\nimport config from \"@/utils/config\";\r\nimport { useI18n } from \"vue-i18n\";\r\nexport default {\r\n  components: {\r\n    IndexTop\r\n  },\r\n  setup () {\r\n     const store = useStore();\r\n     const route = useRoute();\r\n     const { t } = useI18n()\r\n     const data = reactive({\r\n       $t: t,\r\n       themeMode: computed(() => store.state.themeMode),\r\n       rate: computed(() => store.state.rate),\r\n       web3: computed(() => store.state.provider),\r\n       address: computed(() => store.state.accounts[0]),\r\n       ieoContract: null,\r\n       tokenContract: null,\r\n       kis: config.kisAddress,\r\n       tokenAllowance: 0,\r\n       amount: '',\r\n       kisAmount: computed(() => {\r\n         if (data.amount && data.project.priceUsdt) {\r\n           return Number(data.amount/data.project.priceUsdt).toFixed(2)\r\n         }\r\n         return 0;\r\n       }),\r\n       id: route.params.id,\r\n       project: null,\r\n       initContract: () => {\r\n         data.ieoContract = new data.web3.eth.Contract(ieoAbi, config.ieo)\r\n         data.tokenContract = new data.web3.eth.Contract(tokenAbi, config.kisAddress)\r\n         data.getList()\r\n         data.getTokenAllowance()\r\n       },\r\n       initWallet: () => {\r\n         web3Data.initWeb3()\r\n       },\r\n       getTokenAllowance: () => {\r\n        data.tokenContract.methods.allowance(data.address, config.ieo).call().then((amount) => {\r\n          data.tokenAllowance = amount;\r\n        })\r\n       },\r\n       approveToken: () => {\r\n         data.tokenContract.methods.approve(config.ieo, MaxUint256).send({from: data.address}).then((result) => {\r\n          data.getTokenAllowance()\r\n        })\r\n       },\r\n       getList: async () => {\r\n         let projectItem = await data.ieoContract.methods.getProjectById(data.id).call()\r\n           let tokenContract = new data.web3.eth.Contract(tokenAbi, projectItem.tokenAddress)\r\n           let decimals = await tokenContract.methods.decimals().call();\r\n           let symbol = await tokenContract.methods.symbol().call();\r\n           let isStop = await data.ieoContract.methods.isStop(data.id).call()\r\n           let params = {\r\n             id: data.id,\r\n             symbol: symbol,\r\n             isStop: isStop,\r\n             tokenSpend: new BigNumber(projectItem.tokenSpend).dividedBy(Math.pow(10, decimals)).toFixed(2),\r\n             startTime: Dateformat(new Date(projectItem.startTime * 1000), \"yyyy-mm-dd hh:MM\"),\r\n             stopTime: Dateformat(new Date(projectItem.stopTime * 1000), \"yyyy-mm-dd hh:MM\"),\r\n             tokenTotal: new BigNumber(projectItem.tokenTotal).dividedBy(Math.pow(10, decimals)).toFixed(2),\r\n             priceUsdt: projectItem.priceUsdt,\r\n             haveCollect: new BigNumber(projectItem.haveCollect).dividedBy(Math.pow(10, 18)).toFixed(2),\r\n             isEnd: projectItem.isEnd,\r\n             tokenAddress: projectItem.tokenAddress\r\n           }\r\n           data.project = params;\r\n       },\r\n       swap: async () => {\r\n         if (!data.amount) {\r\n           ElMessage.error(data.$t('ieo.请输入兑换数量'));\r\n           return\r\n         }\r\n        let tokenContract = new data.web3.eth.Contract(tokenAbi, data.project.tokenAddress)\r\n        let decimals = await tokenContract.methods.decimals().call();\r\n        let amount = new BigNumber(data.amount).multipliedBy(Math.pow(10, decimals)).toFixed()\r\n        await data.ieoContract.methods.swapToken(data.id, amount).send({from: data.address})\r\n       },\r\n       stop: async () => {\r\n         await data.ieoContract.methods.stopRefund(data.id).send({from: data.address})\r\n       }\r\n     })\r\n    \r\n     if (data.address) {\r\n       data.initContract()\r\n     }\r\n     watch(() => data.address, (val) => {\r\n       if (val) {\r\n         data.initContract()\r\n       }\r\n     })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.top-text {\r\n  color: #fff;\r\n  font-size: 18px;\r\n  text-align: center;\r\n  margin: 26px 0 13px;\r\n}\r\n.form-block {\r\n  width: 658px;\r\n  height: 438px;\r\n  margin: 0 auto 190px;\r\n  padding: 87px 70px 90px;\r\n  background: url('~@/assets/image/ieo/border2.png') no-repeat 0 0;\r\n  background-size: 100% 100%;\r\n  .cell-row {\r\n    background: #fff;\r\n    height: 96px;\r\n    padding: 0 21px;\r\n    .label {\r\n      font-size: 24px;\r\n      color: #212429;\r\n    }\r\n    .cont {\r\n      .input-style {\r\n        width: 100%;\r\n        text-align: right;\r\n        font-size: 22px;\r\n        color: #188277;\r\n        font-weight: bold;\r\n        border: 0;\r\n        outline: none;\r\n      }\r\n    }\r\n  }\r\n  .cell-msg {\r\n    font-size: 22px;\r\n    color: #08E8CE;\r\n    text-align: right;\r\n    margin: 14px 0;\r\n  }\r\n  .form-btn {\r\n    margin: 37px auto 0;\r\n    width: 500px;\r\n    height: 61px;\r\n    color: #fff;\r\n    line-height: 61px;\r\n    font-size: 18px;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    background: url('~@/assets/image/liquidity/btn_bg1.png') no-repeat 0 0;\r\n    background-size: 100% 100%;\r\n    transition: all 0.3s;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background-image: url('~@/assets/image/liquidity/btn_bg4.png');\r\n    }\r\n  }\r\n}\r\n.theme-light {\r\n  .top-text {\r\n    color: #333;\r\n  }\r\n  .form-block {\r\n    background-image: url('~@/assets/image/light/ieo/border2.png');\r\n    .cell-row {\r\n      box-shadow: 0px 3px 9px 0px rgba(0, 0, 0, 0.24);\r\n      .cont {\r\n        .input-style {\r\n          color: #3A7343;\r\n        }\r\n      }\r\n    }\r\n    .cell-msg {\r\n      color: #3A7343;\r\n    }\r\n    .form-btn {\r\n      background-image: url('~@/assets/image/light/liquidity/btn_bg1.png');\r\n      color: #3A7343;\r\n      &:hover {\r\n        color: #AD7805;\r\n        background-image: url('~@/assets/image/light/liquidity/btn_bg4.png');\r\n      }\r\n    }\r\n  }\r\n}\r\n@media screen and (max-width: 480px) {\r\n  .top-text {\r\n    font-size: 14px;\r\n    padding: 0 12px;\r\n  }\r\n  .form-block {\r\n    width: 100%;\r\n    height: auto;\r\n    margin: 0 auto 120px;\r\n    padding: 48px 30px 40px;\r\n    .cell-row {\r\n      height: 50px;\r\n      padding: 0 12px;\r\n      .label {\r\n        font-size: 16px;\r\n      }\r\n      .cont .input-style {\r\n        font-size: 18px;\r\n      }\r\n    }\r\n    .cell-msg {\r\n      font-size: 14px;\r\n    }\r\n    .form-btn {\r\n      height: 50px;\r\n      line-height: 50px;\r\n      margin: 20px auto 0;\r\n      width: 100%;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./exchange.vue?vue&type=template&id=9aaea41a&scoped=true\"\nimport script from \"./exchange.vue?vue&type=script&lang=js\"\nexport * from \"./exchange.vue?vue&type=script&lang=js\"\n\nimport \"./exchange.vue?vue&type=style&index=0&id=9aaea41a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-9aaea41a\"\n\nexport default script","\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}(function(global){var _arguments=arguments;var dateFormat=function(){var token=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|W{1,2}|[LlopSZN]|\"[^\"]*\"|'[^']*'/g;var timezone=/\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;var timezoneClip=/[^-+\\dA-Z]/g;return function(date,mask,utc,gmt){if(_arguments.length===1&&kindOf(date)===\"string\"&&!/\\d/.test(date)){mask=date;date=undefined}date=date||date===0?date:new Date;if(!(date instanceof Date)){date=new Date(date)}if(isNaN(date)){throw TypeError(\"Invalid date\")}mask=String(dateFormat.masks[mask]||mask||dateFormat.masks[\"default\"]);var maskSlice=mask.slice(0,4);if(maskSlice===\"UTC:\"||maskSlice===\"GMT:\"){mask=mask.slice(4);utc=true;if(maskSlice===\"GMT:\"){gmt=true}}var _=function _(){return utc?\"getUTC\":\"get\"};var _d=function d(){return date[_()+\"Date\"]()};var D=function D(){return date[_()+\"Day\"]()};var _m=function m(){return date[_()+\"Month\"]()};var y=function y(){return date[_()+\"FullYear\"]()};var _H=function H(){return date[_()+\"Hours\"]()};var _M=function M(){return date[_()+\"Minutes\"]()};var _s=function s(){return date[_()+\"Seconds\"]()};var _L=function L(){return date[_()+\"Milliseconds\"]()};var _o=function o(){return utc?0:date.getTimezoneOffset()};var _W=function W(){return getWeek(date)};var _N=function N(){return getDayOfWeek(date)};var flags={d:function d(){return _d()},dd:function dd(){return pad(_d())},ddd:function ddd(){return dateFormat.i18n.dayNames[D()]},DDD:function DDD(){return getDayName({y:y(),m:_m(),d:_d(),_:_(),dayName:dateFormat.i18n.dayNames[D()],short:true})},dddd:function dddd(){return dateFormat.i18n.dayNames[D()+7]},DDDD:function DDDD(){return getDayName({y:y(),m:_m(),d:_d(),_:_(),dayName:dateFormat.i18n.dayNames[D()+7]})},m:function m(){return _m()+1},mm:function mm(){return pad(_m()+1)},mmm:function mmm(){return dateFormat.i18n.monthNames[_m()]},mmmm:function mmmm(){return dateFormat.i18n.monthNames[_m()+12]},yy:function yy(){return String(y()).slice(2)},yyyy:function yyyy(){return pad(y(),4)},h:function h(){return _H()%12||12},hh:function hh(){return pad(_H()%12||12)},H:function H(){return _H()},HH:function HH(){return pad(_H())},M:function M(){return _M()},MM:function MM(){return pad(_M())},s:function s(){return _s()},ss:function ss(){return pad(_s())},l:function l(){return pad(_L(),3)},L:function L(){return pad(Math.floor(_L()/10))},t:function t(){return _H()<12?dateFormat.i18n.timeNames[0]:dateFormat.i18n.timeNames[1]},tt:function tt(){return _H()<12?dateFormat.i18n.timeNames[2]:dateFormat.i18n.timeNames[3]},T:function T(){return _H()<12?dateFormat.i18n.timeNames[4]:dateFormat.i18n.timeNames[5]},TT:function TT(){return _H()<12?dateFormat.i18n.timeNames[6]:dateFormat.i18n.timeNames[7]},Z:function Z(){return gmt?\"GMT\":utc?\"UTC\":(String(date).match(timezone)||[\"\"]).pop().replace(timezoneClip,\"\").replace(/GMT\\+0000/g,\"UTC\")},o:function o(){return(_o()>0?\"-\":\"+\")+pad(Math.floor(Math.abs(_o())/60)*100+Math.abs(_o())%60,4)},p:function p(){return(_o()>0?\"-\":\"+\")+pad(Math.floor(Math.abs(_o())/60),2)+\":\"+pad(Math.floor(Math.abs(_o())%60),2)},S:function S(){return[\"th\",\"st\",\"nd\",\"rd\"][_d()%10>3?0:(_d()%100-_d()%10!=10)*_d()%10]},W:function W(){return _W()},WW:function WW(){return pad(_W())},N:function N(){return _N()}};return mask.replace(token,function(match){if(match in flags){return flags[match]()}return match.slice(1,match.length-1)})}}();dateFormat.masks={default:\"ddd mmm dd yyyy HH:MM:ss\",shortDate:\"m/d/yy\",paddedShortDate:\"mm/dd/yyyy\",mediumDate:\"mmm d, yyyy\",longDate:\"mmmm d, yyyy\",fullDate:\"dddd, mmmm d, yyyy\",shortTime:\"h:MM TT\",mediumTime:\"h:MM:ss TT\",longTime:\"h:MM:ss TT Z\",isoDate:\"yyyy-mm-dd\",isoTime:\"HH:MM:ss\",isoDateTime:\"yyyy-mm-dd'T'HH:MM:sso\",isoUtcDateTime:\"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\",expiresHeaderFormat:\"ddd, dd mmm yyyy HH:MM:ss Z\"};dateFormat.i18n={dayNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\",\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],monthNames:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\",\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],timeNames:[\"a\",\"p\",\"am\",\"pm\",\"A\",\"P\",\"AM\",\"PM\"]};var pad=function pad(val,len){val=String(val);len=len||2;while(val.length<len){val=\"0\"+val}return val};var getDayName=function getDayName(_ref){var y=_ref.y,m=_ref.m,d=_ref.d,_=_ref._,dayName=_ref.dayName,_ref$short=_ref[\"short\"],_short=_ref$short===void 0?false:_ref$short;var today=new Date;var yesterday=new Date;yesterday.setDate(yesterday[_+\"Date\"]()-1);var tomorrow=new Date;tomorrow.setDate(tomorrow[_+\"Date\"]()+1);var today_d=function today_d(){return today[_+\"Date\"]()};var today_m=function today_m(){return today[_+\"Month\"]()};var today_y=function today_y(){return today[_+\"FullYear\"]()};var yesterday_d=function yesterday_d(){return yesterday[_+\"Date\"]()};var yesterday_m=function yesterday_m(){return yesterday[_+\"Month\"]()};var yesterday_y=function yesterday_y(){return yesterday[_+\"FullYear\"]()};var tomorrow_d=function tomorrow_d(){return tomorrow[_+\"Date\"]()};var tomorrow_m=function tomorrow_m(){return tomorrow[_+\"Month\"]()};var tomorrow_y=function tomorrow_y(){return tomorrow[_+\"FullYear\"]()};if(today_y()===y&&today_m()===m&&today_d()===d){return _short?\"Tdy\":\"Today\"}else if(yesterday_y()===y&&yesterday_m()===m&&yesterday_d()===d){return _short?\"Ysd\":\"Yesterday\"}else if(tomorrow_y()===y&&tomorrow_m()===m&&tomorrow_d()===d){return _short?\"Tmw\":\"Tomorrow\"}return dayName};var getWeek=function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/(864e5*7);return 1+Math.floor(weekDiff)};var getDayOfWeek=function getDayOfWeek(date){var dow=date.getDay();if(dow===0){dow=7}return dow};var kindOf=function kindOf(val){if(val===null){return\"null\"}if(val===undefined){return\"undefined\"}if(_typeof(val)!==\"object\"){return _typeof(val)}if(Array.isArray(val)){return\"array\"}return{}.toString.call(val).slice(8,-1).toLowerCase()};if(typeof define===\"function\"&&define.amd){define(function(){return dateFormat})}else if((typeof exports===\"undefined\"?\"undefined\":_typeof(exports))===\"object\"){module.exports=dateFormat}else{global.dateFormat=dateFormat}})(void 0);","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./exchange.vue?vue&type=style&index=0&id=9aaea41a&lang=scss&scoped=true\""],"sourceRoot":""}