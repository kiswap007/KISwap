(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["IeoExchange"],{4256:function(e,t,n){},"97c5":function(e,t,n){"use strict";n.r(t);n("a9e3");var a=n("7a23"),r=Object(a["withScopeId"])("data-v-9aaea41a");Object(a["pushScopeId"])("data-v-9aaea41a");var i={class:"page"},o={class:"top-text"},s={class:"form-block"},u={class:"cell-row flex-middle"},d={class:"label"},c={class:"flex-item cont"},p={class:"cell-msg"};Object(a["popScopeId"])();var l=r((function(e,t,n,r,l,y){var m=Object(a["resolveComponent"])("index-top");return Object(a["openBlock"])(),Object(a["createBlock"])("div",i,[Object(a["createVNode"])(m,{h1:"KISwap",h4:e.$t("index.最具潜力的集DEX、IKO、DAO、聚合交易为一体的DEFI生态平台")},null,8,["h4"]),Object(a["createVNode"])("div",o,Object(a["toDisplayString"])(e.$t("ieo.注意：我们只支持okexchainkis，不要转移etherummainnet令牌")),1),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("div",d,Object(a["toDisplayString"])(e.project?e.project.symbol:"")+Object(a["toDisplayString"])(e.$t("index.数量")),1),Object(a["createVNode"])("div",c,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.amount=t}),placeholder:e.$t("ieo.请输入"),class:"input-style"},null,8,["placeholder"]),[[a["vModelText"],e.amount]])])]),Object(a["createVNode"])("div",p,Object(a["toDisplayString"])(e.$t("ieo.kis数量",{num:e.kisAmount})),1),e.address?Number(e.tokenAllowance)?e.project&&!e.project.isStop?(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:2,class:"form-btn",onClick:t[4]||(t[4]=function(){return e.swap&&e.swap.apply(e,arguments)})},Object(a["toDisplayString"])(e.$t("index.兑换")),1)):e.project&&!e.project.isEnd?(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:3,class:"form-btn",onClick:t[5]||(t[5]=function(){return e.stop&&e.stop.apply(e,arguments)})},Object(a["toDisplayString"])(e.$t("ieo.项目方获取资金")),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:4,class:"form-btn",onClick:t[6]||(t[6]=function(){return e.stop&&e.stop.apply(e,arguments)})},Object(a["toDisplayString"])(e.$t("ieo.已结束")),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:1,class:"form-btn",onClick:t[3]||(t[3]=function(){return e.approveToken&&e.approveToken.apply(e,arguments)})},Object(a["toDisplayString"])(e.$t("ieo.授权KIS代币")),1)):(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:0,class:"form-btn",onClick:t[2]||(t[2]=function(){return e.initWallet&&e.initWallet.apply(e,arguments)})},Object(a["toDisplayString"])(e.$t("ieo.连接钱包")),1))])])})),y=(n("b680"),n("5530")),m=(n("96cf"),n("1da1")),f=n("4187"),b=n("f2d1"),T=n("901e"),h=n.n(T),w=n("722f"),M=n("b9b9"),v=n.n(M),k=n("5502"),j=n("9d56"),g=n("6c02"),O=n("ee10"),D=n("3fd4"),S=n("01ea"),C=n("47e2"),x={components:{IndexTop:f["a"]},setup:function(){var e=Object(k["b"])(),t=Object(g["c"])(),n=Object(C["b"])(),r=n.t,i=Object(a["reactive"])({$t:r,themeMode:Object(a["computed"])((function(){return e.state.themeMode})),rate:Object(a["computed"])((function(){return e.state.rate})),web3:Object(a["computed"])((function(){return e.state.provider})),address:Object(a["computed"])((function(){return e.state.accounts[0]})),ieoContract:null,tokenContract:null,kis:S["a"].kisAddress,tokenAllowance:0,amount:"",kisAmount:Object(a["computed"])((function(){return i.amount&&i.project.priceUsdt?Number(i.amount/i.project.priceUsdt).toFixed(2):0})),id:t.params.id,project:null,initContract:function(){i.ieoContract=new i.web3.eth.Contract(b,S["a"].ieo),i.tokenContract=new i.web3.eth.Contract(w,S["a"].kisAddress),i.getList(),i.getTokenAllowance()},initWallet:function(){O["a"].initWeb3()},getTokenAllowance:function(){i.tokenContract.methods.allowance(i.address,S["a"].ieo).call().then((function(e){i.tokenAllowance=e}))},approveToken:function(){i.tokenContract.methods.approve(S["a"].ieo,j["a"]).send({from:i.address}).then((function(e){i.getTokenAllowance()}))},getList:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.ieoContract.methods.getProjectById(i.id).call();case 2:return t=e.sent,n=new i.web3.eth.Contract(w,t.tokenAddress),e.next=6,n.methods.decimals().call();case 6:return a=e.sent,e.next=9,n.methods.symbol().call();case 9:return r=e.sent,e.next=12,i.ieoContract.methods.isStop(i.id).call();case 12:o=e.sent,s={id:i.id,symbol:r,isStop:o,tokenSpend:new h.a(t.tokenSpend).dividedBy(Math.pow(10,a)).toFixed(2),startTime:v()(new Date(1e3*t.startTime),"yyyy-mm-dd hh:MM"),stopTime:v()(new Date(1e3*t.stopTime),"yyyy-mm-dd hh:MM"),tokenTotal:new h.a(t.tokenTotal).dividedBy(Math.pow(10,a)).toFixed(2),priceUsdt:t.priceUsdt,haveCollect:new h.a(t.haveCollect).dividedBy(Math.pow(10,18)).toFixed(2),isEnd:t.isEnd,tokenAddress:t.tokenAddress},i.project=s;case 15:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),swap:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.amount){e.next=3;break}return D["a"].error(i.$t("ieo.请输入兑换数量")),e.abrupt("return");case 3:return t=new i.web3.eth.Contract(w,i.project.tokenAddress),e.next=6,t.methods.decimals().call();case 6:return n=e.sent,a=new h.a(i.amount).multipliedBy(Math.pow(10,n)).toFixed(),e.next=10,i.ieoContract.methods.swapToken(i.id,a).send({from:i.address});case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),stop:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.ieoContract.methods.stopRefund(i.id).send({from:i.address});case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()});i.address&&i.initContract(),Object(a["watch"])((function(){return i.address}),(function(e){e&&i.initContract()}));var o=Object(a["toRefs"])(i);return Object(y["a"])({},o)}};n("df1f");x.render=l,x.__scopeId="data-v-9aaea41a";t["default"]=x},b9b9:function(e,t,n){"use strict";var a;function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}(function(i){var o=arguments,s=function(){var e=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(a,r,i,y){if(1!==o.length||"string"!==l(a)||/\d/.test(a)||(r=a,a=void 0),a=a||0===a?a:new Date,a instanceof Date||(a=new Date(a)),isNaN(a))throw TypeError("Invalid date");r=String(s.masks[r]||r||s.masks["default"]);var m=r.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(r=r.slice(4),i=!0,"GMT:"===m&&(y=!0));var f=function(){return i?"getUTC":"get"},b=function(){return a[f()+"Date"]()},T=function(){return a[f()+"Day"]()},h=function(){return a[f()+"Month"]()},w=function(){return a[f()+"FullYear"]()},M=function(){return a[f()+"Hours"]()},v=function(){return a[f()+"Minutes"]()},k=function(){return a[f()+"Seconds"]()},j=function(){return a[f()+"Milliseconds"]()},g=function(){return i?0:a.getTimezoneOffset()},O=function(){return c(a)},D=function(){return p(a)},S={d:function(){return b()},dd:function(){return u(b())},ddd:function(){return s.i18n.dayNames[T()]},DDD:function(){return d({y:w(),m:h(),d:b(),_:f(),dayName:s.i18n.dayNames[T()],short:!0})},dddd:function(){return s.i18n.dayNames[T()+7]},DDDD:function(){return d({y:w(),m:h(),d:b(),_:f(),dayName:s.i18n.dayNames[T()+7]})},m:function(){return h()+1},mm:function(){return u(h()+1)},mmm:function(){return s.i18n.monthNames[h()]},mmmm:function(){return s.i18n.monthNames[h()+12]},yy:function(){return String(w()).slice(2)},yyyy:function(){return u(w(),4)},h:function(){return M()%12||12},hh:function(){return u(M()%12||12)},H:function(){return M()},HH:function(){return u(M())},M:function(){return v()},MM:function(){return u(v())},s:function(){return k()},ss:function(){return u(k())},l:function(){return u(j(),3)},L:function(){return u(Math.floor(j()/10))},t:function(){return M()<12?s.i18n.timeNames[0]:s.i18n.timeNames[1]},tt:function(){return M()<12?s.i18n.timeNames[2]:s.i18n.timeNames[3]},T:function(){return M()<12?s.i18n.timeNames[4]:s.i18n.timeNames[5]},TT:function(){return M()<12?s.i18n.timeNames[6]:s.i18n.timeNames[7]},Z:function(){return y?"GMT":i?"UTC":(String(a).match(t)||[""]).pop().replace(n,"").replace(/GMT\+0000/g,"UTC")},o:function(){return(g()>0?"-":"+")+u(100*Math.floor(Math.abs(g())/60)+Math.abs(g())%60,4)},p:function(){return(g()>0?"-":"+")+u(Math.floor(Math.abs(g())/60),2)+":"+u(Math.floor(Math.abs(g())%60),2)},S:function(){return["th","st","nd","rd"][b()%10>3?0:(b()%100-b()%10!=10)*b()%10]},W:function(){return O()},WW:function(){return u(O())},N:function(){return D()}};return r.replace(e,(function(e){return e in S?S[e]():e.slice(1,e.length-1)}))}}();s.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},s.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};var u=function(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e},d=function(e){var t=e.y,n=e.m,a=e.d,r=e._,i=e.dayName,o=e["short"],s=void 0!==o&&o,u=new Date,d=new Date;d.setDate(d[r+"Date"]()-1);var c=new Date;c.setDate(c[r+"Date"]()+1);var p=function(){return u[r+"Date"]()},l=function(){return u[r+"Month"]()},y=function(){return u[r+"FullYear"]()},m=function(){return d[r+"Date"]()},f=function(){return d[r+"Month"]()},b=function(){return d[r+"FullYear"]()},T=function(){return c[r+"Date"]()},h=function(){return c[r+"Month"]()},w=function(){return c[r+"FullYear"]()};return y()===t&&l()===n&&p()===a?s?"Tdy":"Today":b()===t&&f()===n&&m()===a?s?"Ysd":"Yesterday":w()===t&&h()===n&&T()===a?s?"Tmw":"Tomorrow":i},c=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var a=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-a);var r=(t-n)/6048e5;return 1+Math.floor(r)},p=function(e){var t=e.getDay();return 0===t&&(t=7),t},l=function(e){return null===e?"null":void 0===e?"undefined":"object"!==r(e)?r(e):Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()};a=function(){return s}.call(t,n,t,e),void 0===a||(e.exports=a)})(void 0)},df1f:function(e,t,n){"use strict";n("4256")},f2d1:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"address","name":"_payee","type":"address"},{"internalType":"uint256","name":"_priceUsdt","type":"uint256"},{"internalType":"uint256","name":"_startTime","type":"uint256"},{"internalType":"uint256","name":"_stopTime","type":"uint256"},{"internalType":"uint256","name":"_tokenTotal","type":"uint256"}],"name":"addProject","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_ieoMainCoin","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_old","type":"address"},{"indexed":false,"internalType":"address","name":"_new","type":"address"}],"name":"ChangeFactory","type":"event"},{"inputs":[{"internalType":"address","name":"_new","type":"address"}],"name":"changeIeoMainCoin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_old","type":"address"},{"indexed":false,"internalType":"address","name":"_new","type":"address"}],"name":"ChangeIeoMainCoin","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_old","type":"address"},{"indexed":false,"internalType":"address","name":"_new","type":"address"}],"name":"ChangeUsdt","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"address","name":"_payee","type":"address"},{"internalType":"uint256","name":"_priceUsdt","type":"uint256"},{"internalType":"uint256","name":"_startTime","type":"uint256"},{"internalType":"uint256","name":"_stopTime","type":"uint256"},{"internalType":"uint256","name":"_tokenTotal","type":"uint256"}],"name":"setProject","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"stopRefund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_token","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"StopRefund","type":"event"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"uint256","name":"tokenMount","type":"uint256"}],"name":"swapToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"},{"indexed":false,"internalType":"address","name":"_token","type":"address"}],"name":"SwapToken","type":"event"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"getProjectById","outputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"address","name":"payee","type":"address"},{"internalType":"uint256","name":"priceUsdt","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"stopTime","type":"uint256"},{"internalType":"uint256","name":"tokenTotal","type":"uint256"},{"internalType":"uint256","name":"tokenSpend","type":"uint256"},{"internalType":"uint256","name":"haveCollect","type":"uint256"},{"internalType":"bool","name":"isEnd","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProjectIds","outputs":[{"internalType":"uint256[]","name":"_projectIds","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ieoMainCoin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ieoMainCoinDecimals","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"isStop","outputs":[{"internalType":"bool","name":"stop","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"projectCurId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')}}]);
//# sourceMappingURL=IeoExchange.64346732.js.map